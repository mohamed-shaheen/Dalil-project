{% extends 'base.html' %}
{% load avatar_tags %}
{% load static %}

{% block title %}
Profile
{% endblock title %}

{% block main %}

<main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Profile</h2>
          <ol>
            <li><a href="{% url 'address:home' %}">Home</a></li>
            <li>Profile</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->

    <section class="inner-page pt-4">
      <div class="container">
        <p class="m-5">
            
            <div class="flex-row row">
              <div class="col-md-6 col-lg-6 mt-4">
              {% if request.user|has_avatar %}
                {% avatar user 100 class="img-circle img-responsive" id="user_avatar" %}
              {% else %}
                <img src="{% static 'img/ninja_avatar.png' %}" class="img-circle img-responsive" id="user_avatar" width="100" height="100" >
              {% endif %}
              <h3>{{profile.PRuser}}</h3>
              <h4 class="mt-3"><a href="{% url 'avatar_change' %}">Change your avatar</a></h4>
              <h4 class="mt-3"><a href="{{ product.PRshop.get_absolute_url }}" target="_blank">{{product.PRshop}}</a></h4>
              <h4 class="mt-3"><a href="{% url 'avatar_delete' %}">Delete Avatar</a></h4>
              <h4 class="mt-3">
                 <strong>Shops created: </strong>
                 {% if profile.get_shop_count > 0 %}
                   {{ profile.get_shop_count}}
                 {% else %}
                     No products added
                 {% endif %} 
              </h4>

              </div>

              <hr>
              <div class="container">
                    <div class="table-responsive mt-5">

                      <table class="table table-hover table-dark ">
                          <thead>
                            <tr>
                              <th scope="col">#</th>
                              <th scope="col">Shop name</th>
                              <th scope="col">Gover</th>
                              <th scope="col">Address</th>
                              <th scope="col">Number</th>
                              <th scope="col">Created at</th>
                            </tr>
                          </thead>
                          <tbody>
                          {% for shop in shops %}    
                            <tr>
                              <th scope="row">{{forloop.counter}}</th>
                              <td><a href="{{shop.get_absolute_url}}">{{shop.SHname}}</a></td>
                              <td>{{shop.get_SHgover_display}}</td>
                              <td>  {{shop.SHaddress}}</td>
                              <td>{{shop.SHnum}}</td>
                              <td> {{shop.SHcreated_dt}}</td>
                          {% empty %}  
                            <p class="clo alert alert-danger text-center"><strong> NO SHOPS HAS FOUND!!</strong></p>
                          {% endfor %}  
                          </tbody>
                        </table>
      </div>
 

  </div>
                 
        </p>
      </div>
    </section>

  </main>
  <!-- End #main -->

{% endblock main %}